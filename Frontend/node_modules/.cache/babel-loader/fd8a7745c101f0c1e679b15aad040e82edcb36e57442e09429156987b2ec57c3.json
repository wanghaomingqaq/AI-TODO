{"ast":null,"code":"import axios from 'axios';\nimport { nanoid } from 'nanoid';\nimport { ElMessage } from 'element-plus';\nconst open4 = errormsg => {\n  ElMessage.error(errormsg);\n};\nexport default {\n  name: 'HelloWorld',\n  data() {\n    return {\n      localInput: '',\n      // 用于文本框的本地数据\n      recivedata: [],\n      showMessage: false,\n      loading: false\n    };\n  },\n  props: ['addTodo'],\n  methods: {\n    submitText() {\n      this.loading = true;\n      const dataTosend = {\n        text: this.localInput\n      };\n      axios.post('/gpt', dataTosend).then(response => {\n        console.log('服务器响应:', response.data);\n        this.recivedata = response.data.todos;\n        this.showMessage = true;\n        // 处理服务器的响应\n        this.loading = false;\n        this.localInput = '';\n        // this.$emit('inputSubmitted', this.recivedata); // 向父组件发送事件\n        // const todoObj = {id:nanoid(),title:this.recivedata,done:false}\n        const todoObj = this.recivedata.map(item => {\n          return {\n            id: nanoid(),\n            title: item,\n            done: false\n          };\n        });\n        this.recivedata = '';\n        console.log(todoObj);\n        if (todoObj[0].title !== 'null') {\n          this.addTodo(todoObj);\n        } else {\n          open4(\"未提取到关键词！\");\n        }\n      }).catch(error => {\n        const errorMessage = error.message;\n        open4(errorMessage);\n        console.error('请求错误:', error);\n        this.loading = false;\n        // 处理错误ee\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","nanoid","ElMessage","open4","errormsg","error","name","data","localInput","recivedata","showMessage","loading","props","methods","submitText","dataTosend","text","post","then","response","console","log","todos","todoObj","map","item","id","title","done","addTodo","catch","errorMessage","message"],"sources":["/home/workspace/vueProject/my-vue-project/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <el-row class=\"component-container\">\n    <el-col :span=\"1\">\n    </el-col>\n    <el-col :span=\"22\">\n      <div>\n        <el-input type=\"textarea\" :autosize=\"{ minRows: 3, maxRows: 6 }\" v-model=\"localInput\" placeholder=\"说说今天做点什么吧！\">\n        </el-input>\n      </div>\n      <el-row>\n        <el-col :span=\"21\">\n          <div v-if=\"loading\">\n            加载中...\n            <el-icon class=\"is-loading\"><Loading /></el-icon>\n          </div>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button type=\"danger\" round @click=\"submitText\" style=\"margin-top: 5px;\">\n            发送\n          </el-button>\n        </el-col>\n      </el-row>\n    </el-col>\n    <el-col :span=\"1\"></el-col>\n  </el-row>\n  <el-row style=\"background-color: #f1f2f5; height: 15px; margin-left: -20px;  margin-right: -20px;\"></el-row>  \n</template>\n\n\n<script>\nimport axios from 'axios';\nimport {nanoid} from 'nanoid'\nimport { ElMessage } from 'element-plus'\nconst open4 = (errormsg) => {\n  ElMessage.error(errormsg)\n}\nexport default {\n  name: 'HelloWorld',\n  data() {\n    return {\n      localInput: '', // 用于文本框的本地数据\n      recivedata: [],\n      showMessage: false,\n      loading: false\n    };\n  },\n  props:['addTodo'],\n  methods: {\n\n    submitText() {\n      this.loading = true;\n      const dataTosend = {\n        text: this.localInput\n      };\n      axios.post('/gpt', dataTosend)\n        .then(response => {\n          console.log('服务器响应:', response.data);\n          this.recivedata = response.data.todos;\n    \n\n          this.showMessage = true;\n          // 处理服务器的响应\n          this.loading = false;\n          this.localInput = ''\n          // this.$emit('inputSubmitted', this.recivedata); // 向父组件发送事件\n          // const todoObj = {id:nanoid(),title:this.recivedata,done:false}\n          const todoObj = this.recivedata.map(item => {\n            return {\n              id: nanoid(),\n              title: item,\n              done: false\n            };\n          });\n          this.recivedata = ''\n          console.log(todoObj)\n          if (todoObj[0].title !== 'null') {\n            this.addTodo(todoObj);\n          } else {\n            open4(\"未提取到关键词！\")\n          }\n        })\n        .catch(error => {\n          const errorMessage = error.message; \n          open4(errorMessage)\n          console.error('请求错误:', error);\n          this.loading = false;\n          // 处理错误ee\n        });\n    },\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n::v-deep .el-textarea__inner{\n    border-radius: 10px;      /* 圆角 */\n    background-color: #f0f1f4; /* 背景颜色，可根据需要更改颜色值 */\n}\n.is-loading {\n  animation: rotate 2s linear infinite;\n}\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n</style>\n"],"mappings":"AA8BA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAAQC,MAAM,QAAO,QAAO;AAC5B,SAASC,SAAQ,QAAS,cAAa;AACvC,MAAMC,KAAI,GAAKC,QAAQ,IAAK;EAC1BF,SAAS,CAACG,KAAK,CAACD,QAAQ;AAC1B;AACA,eAAe;EACbE,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EAAE;MAAE;MAChBC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE,KAAK;MAClBC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,KAAK,EAAC,CAAC,SAAS,CAAC;EACjBC,OAAO,EAAE;IAEPC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACH,OAAM,GAAI,IAAI;MACnB,MAAMI,UAAS,GAAI;QACjBC,IAAI,EAAE,IAAI,CAACR;MACb,CAAC;MACDR,KAAK,CAACiB,IAAI,CAAC,MAAM,EAAEF,UAAU,EAC1BG,IAAI,CAACC,QAAO,IAAK;QAChBC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,QAAQ,CAACZ,IAAI,CAAC;QACpC,IAAI,CAACE,UAAS,GAAIU,QAAQ,CAACZ,IAAI,CAACe,KAAK;QAGrC,IAAI,CAACZ,WAAU,GAAI,IAAI;QACvB;QACA,IAAI,CAACC,OAAM,GAAI,KAAK;QACpB,IAAI,CAACH,UAAS,GAAI,EAAC;QACnB;QACA;QACA,MAAMe,OAAM,GAAI,IAAI,CAACd,UAAU,CAACe,GAAG,CAACC,IAAG,IAAK;UAC1C,OAAO;YACLC,EAAE,EAAEzB,MAAM,CAAC,CAAC;YACZ0B,KAAK,EAAEF,IAAI;YACXG,IAAI,EAAE;UACR,CAAC;QACH,CAAC,CAAC;QACF,IAAI,CAACnB,UAAS,GAAI,EAAC;QACnBW,OAAO,CAACC,GAAG,CAACE,OAAO;QACnB,IAAIA,OAAO,CAAC,CAAC,CAAC,CAACI,KAAI,KAAM,MAAM,EAAE;UAC/B,IAAI,CAACE,OAAO,CAACN,OAAO,CAAC;QACvB,OAAO;UACLpB,KAAK,CAAC,UAAU;QAClB;MACF,CAAC,EACA2B,KAAK,CAACzB,KAAI,IAAK;QACd,MAAM0B,YAAW,GAAI1B,KAAK,CAAC2B,OAAO;QAClC7B,KAAK,CAAC4B,YAAY;QAClBX,OAAO,CAACf,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;QAC7B,IAAI,CAACM,OAAM,GAAI,KAAK;QACpB;MACF,CAAC,CAAC;IACN;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}